drop database hello;
create database hello;
use hello;

create table hello_stationinfo	(
				sid int primary key auto_increment,
				sname varchar (50),
				washroom varchar(5),
				parking varchar(5),
				elevator varchar(5),
				opening_date date,
				contact bigint,
				pincode int,
				cost int NULL,
				pathId int NULL,
				calculated int NULL
				);

load data local infile '/Users/chaitanyagupta/Desktop/stationinfo.txt' into table hello_stationinfo;


create table h_places		(
				pid  int primary key auto_increment,
				sname varchar(50),
				place varchar(75)
				);


create table hello_places	(
				sid int,
				pid  int primary key auto_increment,
				sname varchar(50),
				place varchar(75),
				foreign key(sid) references hello_stationinfo(sid) on update cascade on delete cascade
				);


load data local infile '/Users/chaitanyagupta/Desktop/places.txt' into table h_places;
insert into hello_places (select b.sid,pid,a.sname,place from h_places as a ,hello_stationinfo as b where a.sname=b.sname);
drop table h_places;


 
create table hello_paths	(
				pathId int primary key auto_increment,
				fromsid int,
				tosid int,
				cost int,
				foreign key(fromsid) references hello_stationinfo(sid) on update cascade on delete cascade,
				foreign key(tosid) references hello_stationinfo(sid) on update cascade on delete cascade
				);
load data local infile '/Users/chaitanyagupta/Desktop/path.txt' into table hello_paths;


create table h_stations		(
				sno int primary key auto_increment,
				sname varchar (50),
				line varchar(15),
				grade varchar(15)
				);

create table hello_stations	(
				sid int,
				sno int primary key auto_increment,
				sname varchar (50),
				line varchar(15),
				grade varchar(15),
				foreign key(sid) references hello_stationinfo(sid) on update cascade on delete cascade
				);

load data local infile '/Users/chaitanyagupta/Desktop/stations.txt' into table h_stations;
insert into hello_stations (select b.sid,sno,a.sname,line,grade from h_stations as a ,hello_stationinfo as b where a.sname=b.sname);
drop table h_stations;


create table reviews  		(
				timest timestamp primary key,
				sname varchar(50) not null,
				title varchar(50) not null,
				author varchar(50),					
				bodytext longtext not null,				
				approval varchar(5)
				);				

create table hello_admin	(
				username varchar(25),
				password varchar(25)
				);

insert into hello_admin values("admin@admin.com","admin");

grant all privileges on *.* to root@localhost identified by 'aman' with grant option;